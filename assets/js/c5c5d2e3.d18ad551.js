"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["2098"],{18165:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>l,toc:()=>a,default:()=>u,metadata:()=>r,assets:()=>d,contentTitle:()=>s});var r=JSON.parse('{"id":"video-view/picture-in-picture","title":"Picture in Picture","description":"Enable Picture-in-Picture (PiP) mode to let users watch video in a floating window while using other apps.","source":"@site/docs/video-view/picture-in-picture.md","sourceDirName":"video-view","slug":"/video-view/picture-in-picture","permalink":"/react-native-video/docs/v7/video-view/picture-in-picture","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Fullscreen","permalink":"/react-native-video/docs/v7/video-view/fullscreen"},"next":{"title":"Custom UI Controls","permalink":"/react-native-video/docs/v7/ui/getting-started"}}'),t=i(74848),c=i(56151);let l={},s="Picture in Picture",d={},a=[{value:"Props",id:"props",level:2},{value:"pictureInPicture",id:"pictureinpicture",level:3},{value:"autoEnterPictureInPicture",id:"autoenterpictureinpicture",level:3},{value:"Methods",id:"methods",level:2},{value:"enterPictureInPicture()",id:"enterpictureinpicture",level:3},{value:"exitPictureInPicture()",id:"exitpictureinpicture",level:3},{value:"canEnterPictureInPicture()",id:"canenterpictureinpicture",level:3},{value:"Events",id:"events",level:2},{value:"onPictureInPictureChange",id:"onpictureinpicturechange",level:3},{value:"willEnterPictureInPicture",id:"willenterpictureinpicture",level:3},{value:"willExitPictureInPicture",id:"willexitpictureinpicture",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Platform Configuration",id:"platform-configuration",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Platform Support",id:"platform-support",level:2},{value:"See Also",id:"see-also",level:2}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"picture-in-picture",children:"Picture in Picture"})}),"\n",(0,t.jsx)(n.p,{children:"Enable Picture-in-Picture (PiP) mode to let users watch video in a floating window while using other apps."}),"\n",(0,t.jsx)(n.h2,{id:"props",children:"Props"}),"\n",(0,t.jsx)(n.h3,{id:"pictureinpicture",children:"pictureInPicture"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"optional pictureInPicture: boolean;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Enable PiP and show the PiP button in native controls. Defaults to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<VideoView player={player} controls pictureInPicture />\n"})}),"\n",(0,t.jsx)(n.h3,{id:"autoenterpictureinpicture",children:"autoEnterPictureInPicture"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"optional autoEnterPictureInPicture: boolean;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Automatically enter PiP when the app goes to background. Defaults to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<VideoView \n  player={player} \n  pictureInPicture \n  autoEnterPictureInPicture \n/>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsxs)(n.p,{children:["Access these methods via a ref to ",(0,t.jsx)(n.code,{children:"VideoView"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const videoRef = useRef<VideoViewRef>(null);\n\n<VideoView ref={videoRef} player={player} />\n"})}),"\n",(0,t.jsx)(n.h3,{id:"enterpictureinpicture",children:"enterPictureInPicture()"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"enterPictureInPicture(): void;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Enter PiP mode programmatically."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"videoRef.current?.enterPictureInPicture();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"exitpictureinpicture",children:"exitPictureInPicture()"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"exitPictureInPicture(): void;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Exit PiP mode programmatically."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"videoRef.current?.exitPictureInPicture();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"canenterpictureinpicture",children:"canEnterPictureInPicture()"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"canEnterPictureInPicture(): boolean;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check if PiP is supported on the current device."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const canPiP = videoRef.current?.canEnterPictureInPicture();\n\nif (canPiP) {\n  videoRef.current?.enterPictureInPicture();\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,t.jsx)(n.h3,{id:"onpictureinpicturechange",children:"onPictureInPictureChange"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"onPictureInPictureChange?: (isInPiP: boolean) => void;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Called when PiP state changes."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<VideoView\n  player={player}\n  onPictureInPictureChange={(isInPiP) => {\n    console.log('PiP:', isInPiP);\n  }}\n/>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"willenterpictureinpicture",children:"willEnterPictureInPicture"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"willEnterPictureInPicture?: () => void;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Called immediately before entering PiP mode."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<VideoView\n  player={player}\n  willEnterPictureInPicture={() => {\n    // Prepare for PiP\n  }}\n/>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"willexitpictureinpicture",children:"willExitPictureInPicture"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"willExitPictureInPicture?: () => void;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Called immediately before exiting PiP mode."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<VideoView\n  player={player}\n  willExitPictureInPicture={() => {\n    // Prepare to return to full view\n  }}\n/>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import React, { useRef, useState } from 'react';\nimport { View, Button, Text } from 'react-native';\nimport { useVideoPlayer, VideoView, VideoViewRef } from 'react-native-video';\n\nfunction PiPPlayer({ source }) {\n  const videoRef = useRef<VideoViewRef>(null);\n  const [isInPiP, setIsInPiP] = useState(false);\n  const [canPiP, setCanPiP] = useState(false);\n\n  const player = useVideoPlayer(source, (_player) => {\n    _player.play();\n  });\n\n  const handleLayout = () => {\n    setCanPiP(videoRef.current?.canEnterPictureInPicture() ?? false);\n  };\n\n  const togglePiP = () => {\n    if (isInPiP) {\n      videoRef.current?.exitPictureInPicture();\n    } else {\n      videoRef.current?.enterPictureInPicture();\n    }\n  };\n\n  return (\n    <View>\n      <VideoView\n        ref={videoRef}\n        player={player}\n        style={{ width: '100%', aspectRatio: 16/9 }}\n        pictureInPicture\n        autoEnterPictureInPicture\n        onLayout={handleLayout}\n        onPictureInPictureChange={setIsInPiP}\n      />\n      \n      {canPiP ? (\n        <Button \n          title={isInPiP ? 'Exit PiP' : 'Enter PiP'} \n          onPress={togglePiP} \n        />\n      ) : (\n        <Text>PiP not supported on this device</Text>\n      )}\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"platform-configuration",children:"Platform Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,t.jsxs)(n.p,{children:["Add to your ",(0,t.jsx)(n.code,{children:"Info.plist"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<key>UIBackgroundModes</key>\n<array>\n  <string>audio</string>\n</array>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,t.jsxs)(n.p,{children:["PiP requires Android 8.0 (API 26) or higher. Add to your ",(0,t.jsx)(n.code,{children:"AndroidManifest.xml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<activity\n  android:name=".MainActivity"\n  android:supportsPictureInPicture="true"\n  android:configChanges="screenSize|smallestScreenSize|screenLayout|orientation">\n</activity>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"platform-support",children:"Platform Support"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"iOS"}),(0,t.jsx)(n.th,{children:"Android"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PiP"}),(0,t.jsx)(n.td,{children:"\u2705 iOS 14+"}),(0,t.jsx)(n.td,{children:"\u2705 API 26+"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Auto-enter"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Custom controls in PiP"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u274C"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/video-view/props",children:"Props"})," - All VideoView props"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/video-view/fullscreen",children:"Fullscreen"})," - Fullscreen mode"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/players/usage/background",children:"Background"})," - Background playback"]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},56151:function(e,n,i){i.d(n,{R:()=>l,x:()=>s});var r=i(96540);let t={},c=r.createContext(t);function l(e){let n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);