"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["9230"],{42345:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>l,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>a});var s=JSON.parse('{"id":"players/advertising/google-dai","title":"Google DAI","description":"Server-side ad insertion with Google Dynamic Ad Insertion.","source":"@site/docs/players/advertising/google-dai.md","sourceDirName":"players/advertising","slug":"/players/advertising/google-dai","permalink":"/react-native-video/docs/v7/players/advertising/google-dai","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Google IMA","permalink":"/react-native-video/docs/v7/players/advertising/google-ima"},"next":{"title":"SpotX","permalink":"/react-native-video/docs/v7/players/advertising/spotx"}}'),d=i(74848),r=i(56151);let t={},a="Google DAI",o={},l=[{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"VOD (Video on Demand)",id:"vod-video-on-demand",level:3},{value:"Live Stream",id:"live-stream",level:3},{value:"Configuration",id:"configuration",level:2},{value:"VOD Stream",id:"vod-stream",level:3},{value:"Live Stream",id:"live-stream-1",level:3},{value:"Ad Events",id:"ad-events",level:2},{value:"Snapback",id:"snapback",level:2},{value:"Companion Ads",id:"companion-ads",level:2},{value:"Stream Information",id:"stream-information",level:2},{value:"Ad Pods",id:"ad-pods",level:2},{value:"UI Integration",id:"ui-integration",level:2},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom Request Parameters",id:"custom-request-parameters",level:3},{value:"Ad Tracking",id:"ad-tracking",level:3},{value:"Platform Support",id:"platform-support",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Testing",id:"testing",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Stream Not Loading",id:"stream-not-loading",level:3},{value:"Ads Not Playing",id:"ads-not-playing",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"google-dai",children:"Google DAI"})}),"\n",(0,d.jsx)(n.p,{children:"Server-side ad insertion with Google Dynamic Ad Insertion."}),"\n",(0,d.jsx)(n.admonition,{title:"Pro Feature - Coming Soon",type:"tip",children:(0,d.jsx)(n.p,{children:"Google DAI integration is a Pro feature currently in development."})}),"\n",(0,d.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,d.jsx)(n.p,{children:"Google DAI (Dynamic Ad Insertion) provides:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Server-Side Ad Insertion (SSAI)"})," - Ads stitched into stream"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Seamless Playback"})," - No buffering between ads and content"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Ad-Blocker Resistant"})," - Ads part of the stream"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"DVR Support"})," - Ads work with live DVR"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Better Tracking"})," - Server-side metrics"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Live & VOD"})," - Support for both"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Server stitches ads into video stream"}),"\n",(0,d.jsx)(n.li,{children:"Client plays single continuous stream"}),"\n",(0,d.jsx)(n.li,{children:"SDK tracks ad breaks via metadata"}),"\n",(0,d.jsx)(n.li,{children:"No client-side ad insertion needed"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,d.jsx)(n.h3,{id:"vod-video-on-demand",children:"VOD (Video on Demand)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"import { useVideoPlayer, VideoView } from 'react-native-video';\n\nconst player = useVideoPlayer({\n  source: {\n    uri: 'https://dai.google.com/...',\n    type: 'dai',\n  },\n  ads: {\n    enabled: true,\n    provider: 'dai',\n    contentSourceId: '2528370',\n    videoId: 'tears-of-steel',\n  },\n});\n\nreturn <VideoView player={player} />;\n"})}),"\n",(0,d.jsx)(n.h3,{id:"live-stream",children:"Live Stream"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"const player = useVideoPlayer({\n  source: {\n    uri: 'https://dai.google.com/...',\n    type: 'dai',\n  },\n  ads: {\n    enabled: true,\n    provider: 'dai',\n    assetKey: 'sN_IYUG8STe1ZzhIIE_ksA',\n  },\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,d.jsx)(n.h3,{id:"vod-stream",children:"VOD Stream"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'dai',\n  contentSourceId: 'your-content-source-id',\n  videoId: 'your-video-id',\n  apiKey: 'your-api-key', // Optional\n  authToken: 'your-auth-token', // Optional\n}\n"})}),"\n",(0,d.jsx)(n.h3,{id:"live-stream-1",children:"Live Stream"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'dai',\n  assetKey: 'your-asset-key',\n  apiKey: 'your-api-key', // Optional\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"ad-events",children:"Ad Events"}),"\n",(0,d.jsx)(n.p,{children:"DAI provides similar events to IMA:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"// Cue points (ad break markers)\nplayer.addEventListener('adCuePoints', (cuePoints) => {\n  console.log('Ad breaks at:', cuePoints);\n});\n\n// Ad break started\nplayer.addEventListener('adBreakStart', (adBreak) => {\n  console.log('Ad break started:', adBreak);\n  console.log('Duration:', adBreak.duration);\n  console.log('Position:', adBreak.position); // Time in content\n});\n\n// Ad break ended\nplayer.addEventListener('adBreakEnd', () => {\n  console.log('Ad break ended');\n});\n\n// Individual ad started\nplayer.addEventListener('adStart', (ad) => {\n  console.log('Ad started:', ad.title);\n  console.log('Duration:', ad.duration);\n});\n\n// Ad completed\nplayer.addEventListener('adComplete', () => {\n  console.log('Ad completed');\n});\n\n// Ad progress\nplayer.addEventListener('adProgress', (progress) => {\n  console.log('Ad time:', progress.currentTime);\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"snapback",children:"Snapback"}),"\n",(0,d.jsx)(n.p,{children:"Handle seeking during ads:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'dai',\n  contentSourceId: '...',\n  videoId: '...',\n  snapback: true, // Prevent seeking through ads\n}\n\n// Snapback event\nplayer.addEventListener('adSnapback', (position) => {\n  console.log('Seeked during ad, snapped back to:', position);\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"companion-ads",children:"Companion Ads"}),"\n",(0,d.jsx)(n.p,{children:"Display companion banners with DAI:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'dai',\n  contentSourceId: '...',\n  videoId: '...',\n  companionSlots: [\n    { id: 'companion-1', width: 300, height: 250 },\n  ],\n}\n\n// Companion ad event\nplayer.addEventListener('companionAdReady', (companion) => {\n  console.log('Companion ad:', companion.slotId);\n  console.log('HTML content:', companion.content);\n  // Display companion in WebView\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"stream-information",children:"Stream Information"}),"\n",(0,d.jsx)(n.p,{children:"Get DAI stream info:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"const streamInfo = player.getDAIStreamInfo();\n\nconsole.log('Stream ID:', streamInfo.streamId);\nconsole.log('Stream URL:', streamInfo.url);\nconsole.log('Is Live:', streamInfo.isLive);\nconsole.log('Ad breaks:', streamInfo.adBreaks);\n"})}),"\n",(0,d.jsx)(n.h2,{id:"ad-pods",children:"Ad Pods"}),"\n",(0,d.jsx)(n.p,{children:"Handle multiple ads in sequence:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"player.addEventListener('adPodInfo', (podInfo) => {\n  console.log('Pod index:', podInfo.podIndex);\n  console.log('Total ads:', podInfo.totalAds);\n  console.log('Current ad:', podInfo.adPosition);\n  console.log('Pod duration:', podInfo.duration);\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"ui-integration",children:"UI Integration"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"import React, { useState, useEffect } from 'react';\nimport { View, Text } from 'react-native';\n\nfunction DAIVideoPlayer({ contentSourceId, videoId }) {\n  const [isInAdBreak, setIsInAdBreak] = useState(false);\n  const [adInfo, setAdInfo] = useState(null);\n\n  const player = useVideoPlayer({\n    source: {\n      uri: 'https://dai.google.com/...',\n      type: 'dai',\n    },\n    ads: {\n      enabled: true,\n      provider: 'dai',\n      contentSourceId,\n      videoId,\n      snapback: true,\n    },\n  });\n\n  useEffect(() => {\n    player.addEventListener('adBreakStart', () => {\n      setIsInAdBreak(true);\n    });\n\n    player.addEventListener('adBreakEnd', () => {\n      setIsInAdBreak(false);\n      setAdInfo(null);\n    });\n\n    player.addEventListener('adStart', (ad) => {\n      setAdInfo({\n        title: ad.title,\n        duration: ad.duration,\n      });\n    });\n\n    return () => {\n      // Cleanup listeners\n    };\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <VideoView player={player} style={styles.video} />\n      \n      {isInAdBreak && (\n        <View style={styles.adOverlay}>\n          <Text style={styles.adBadge}>Ad</Text>\n          {adInfo && (\n            <Text style={styles.adTitle}>{adInfo.title}</Text>\n          )}\n        </View>\n      )}\n    </View>\n  );\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,d.jsx)(n.h3,{id:"custom-request-parameters",children:"Custom Request Parameters"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'dai',\n  contentSourceId: '...',\n  videoId: '...',\n  customAssetKey: 'custom-key',\n  customParams: {\n    ppid: 'user123',\n    vid: 'video456',\n  },\n}\n"})}),"\n",(0,d.jsx)(n.h3,{id:"ad-tracking",children:"Ad Tracking"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'dai',\n  contentSourceId: '...',\n  videoId: '...',\n  omidVersion: '1.3.7',\n  omidPartnerName: 'MyApp',\n  omidPartnerVersion: '1.0',\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"platform-support",children:"Platform Support"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Platform"}),(0,d.jsx)(n.th,{children:"VOD"}),(0,d.jsx)(n.th,{children:"Live"}),(0,d.jsx)(n.th,{children:"DVR"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"iOS"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Android"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Android TV"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Apple TV"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"}),(0,d.jsx)(n.td,{children:"\u2705"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Snapback"})," - Enable to prevent ad skipping"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Error Handling"})," - Handle DAI stream errors"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Cue Points"})," - Use for UI indicators"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Analytics"})," - Track ad impressions server-side"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Testing"})," - Test with Google's sample streams"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,d.jsx)(n.p,{children:"Use Google's test streams:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"// VOD test\nads: {\n  enabled: true,\n  provider: 'dai',\n  contentSourceId: '2528370',\n  videoId: 'tears-of-steel',\n}\n\n// Live test\nads: {\n  enabled: true,\n  provider: 'dai',\n  assetKey: 'sN_IYUG8STe1ZzhIIE_ksA',\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,d.jsx)(n.h3,{id:"stream-not-loading",children:"Stream Not Loading"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Verify content source ID and video ID"}),"\n",(0,d.jsx)(n.li,{children:"Check API key if required"}),"\n",(0,d.jsx)(n.li,{children:"Review network connectivity"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"ads-not-playing",children:"Ads Not Playing"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Ensure stream has ad metadata"}),"\n",(0,d.jsx)(n.li,{children:"Check DAI console for stream status"}),"\n",(0,d.jsx)(n.li,{children:"Verify ad insertion setup"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/react-native-video/docs/v7/players/advertising/getting-started",children:"Getting Started"})," - Ads overview"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/react-native-video/docs/v7/players/advertising/google-ima",children:"Google IMA"})," - Client-side ads"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"/react-native-video/docs/v7/players/events/useEvent",children:"Events"})," - Event handling"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},56151:function(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(96540);let d={},r=s.createContext(d);function t(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);