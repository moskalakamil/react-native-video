"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["9884"],{18206:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>t,toc:()=>o,default:()=>p,metadata:()=>i,assets:()=>a,contentTitle:()=>l});var i=JSON.parse('{"id":"players/advertising/google-ima","title":"Google IMA","description":"Integrate Google\'s Interactive Media Ads SDK for client-side advertising.","source":"@site/docs/players/advertising/google-ima.md","sourceDirName":"players/advertising","slug":"/players/advertising/google-ima","permalink":"/react-native-video/docs/v7/players/advertising/google-ima","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Getting Started with Ads","permalink":"/react-native-video/docs/v7/players/advertising/getting-started"},"next":{"title":"Google DAI","permalink":"/react-native-video/docs/v7/players/advertising/google-dai"}}'),r=s(74848),d=s(56151);let t={},l="Google IMA",a={},o=[{value:"Overview",id:"overview",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Ad Tag URL",id:"ad-tag-url",level:3},{value:"Multiple Ad Breaks",id:"multiple-ad-breaks",level:3},{value:"Companion Ads",id:"companion-ads",level:3},{value:"Ad Events",id:"ad-events",level:2},{value:"Ad Controls",id:"ad-controls",level:2},{value:"Skip Ad",id:"skip-ad",level:3},{value:"Pause/Resume Ad",id:"pauseresume-ad",level:3},{value:"Get Current Ad",id:"get-current-ad",level:3},{value:"Custom UI",id:"custom-ui",level:2},{value:"Skip Button",id:"skip-button",level:3},{value:"Ad Countdown",id:"ad-countdown",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Request Settings",id:"request-settings",level:3},{value:"Ad UI Settings",id:"ad-ui-settings",level:3},{value:"Testing",id:"testing",level:2},{value:"Platform Setup",id:"platform-setup",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Ads Not Playing",id:"ads-not-playing",level:3},{value:"Ads Blocked",id:"ads-blocked",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){let n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"google-ima",children:"Google IMA"})}),"\n",(0,r.jsx)(n.p,{children:"Integrate Google's Interactive Media Ads SDK for client-side advertising."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Google IMA (Interactive Media Ads) provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VAST/VMAP Support"})," - Industry-standard ad formats"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pre/Mid/Post-roll"})," - Flexible ad placement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ad Pods"})," - Multiple ads in sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Skippable Ads"})," - User can skip after countdown"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Click-through"})," - Users can click ads"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VPAID Support"})," - Interactive ads"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useVideoPlayer, VideoView } from 'react-native-video';\n\nconst player = useVideoPlayer({\n  source: {\n    uri: 'https://example.com/video.mp4',\n  },\n  ads: {\n    enabled: true,\n    provider: 'ima',\n    adTagUrl: 'https://pubads.g.doubleclick.net/gampad/ads?...', // VAST tag\n  },\n});\n\nreturn <VideoView player={player} style={{ flex: 1 }} />;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"ad-tag-url",children:"Ad Tag URL"}),"\n",(0,r.jsx)(n.p,{children:"Provide VAST/VMAP ad tag URL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'ima',\n  adTagUrl: 'https://pubads.g.doubleclick.net/gampad/ads?iu=/123/video&...', // Your ad tag\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multiple-ad-breaks",children:"Multiple Ad Breaks"}),"\n",(0,r.jsx)(n.p,{children:"Use VMAP for multiple ad breaks:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'ima',\n  adTagUrl: 'https://example.com/vmap.xml', // VMAP with pre/mid/post-roll\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"companion-ads",children:"Companion Ads"}),"\n",(0,r.jsx)(n.p,{children:"Display companion banners:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'ima',\n  adTagUrl: '...',\n  companionSlots: [\n    { id: 'companion-1', width: 300, height: 250 },\n    { id: 'companion-2', width: 728, height: 90 },\n  ],\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ad-events",children:"Ad Events"}),"\n",(0,r.jsx)(n.p,{children:"Listen to IMA ad events:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Ad started\nplayer.addEventListener('adStart', (ad) => {\n  console.log('Ad started:', ad);\n  console.log('Duration:', ad.duration);\n  console.log('Title:', ad.title);\n  console.log('Skippable:', ad.skippable);\n  console.log('Skip offset:', ad.skipOffset);\n});\n\n// Ad progress\nplayer.addEventListener('adProgress', (progress) => {\n  console.log('Ad progress:', progress.currentTime, '/', progress.duration);\n});\n\n// Ad paused/resumed\nplayer.addEventListener('adPause', () => {\n  console.log('Ad paused');\n});\n\nplayer.addEventListener('adResume', () => {\n  console.log('Ad resumed');\n});\n\n// Ad completed\nplayer.addEventListener('adComplete', () => {\n  console.log('Ad completed');\n});\n\n// Ad skipped\nplayer.addEventListener('adSkipped', () => {\n  console.log('Ad skipped by user');\n});\n\n// Ad clicked\nplayer.addEventListener('adClick', () => {\n  console.log('Ad clicked');\n  // Optionally pause main video\n  player.pause();\n});\n\n// Ad error\nplayer.addEventListener('adError', (error) => {\n  console.error('Ad error:', error.message);\n  // Continue with main content\n});\n\n// All ads completed\nplayer.addEventListener('allAdsCompleted', () => {\n  console.log('All ads completed');\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ad-controls",children:"Ad Controls"}),"\n",(0,r.jsx)(n.h3,{id:"skip-ad",children:"Skip Ad"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Check if skippable\nif (player.isAdSkippable()) {\n  player.skipAd();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pauseresume-ad",children:"Pause/Resume Ad"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Pause ad\nplayer.pauseAd();\n\n// Resume ad\nplayer.resumeAd();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"get-current-ad",children:"Get Current Ad"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const currentAd = player.getCurrentAd();\n\nif (currentAd) {\n  console.log('Title:', currentAd.title);\n  console.log('Duration:', currentAd.duration);\n  console.log('Remaining:', currentAd.remainingTime);\n  console.log('Position:', currentAd.adPosition); // 'pre', 'mid', 'post'\n  console.log('Total ads in pod:', currentAd.totalAdsInPod);\n  console.log('Ad index in pod:', currentAd.adIndexInPod);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"custom-ui",children:"Custom UI"}),"\n",(0,r.jsx)(n.h3,{id:"skip-button",children:"Skip Button"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import React, { useState, useEffect } from 'react';\nimport { View, Text, TouchableOpacity } from 'react-native';\n\nfunction CustomSkipButton({ player }) {\n  const [canSkip, setCanSkip] = useState(false);\n  const [countdown, setCountdown] = useState(0);\n\n  useEffect(() => {\n    const onAdProgress = (progress) => {\n      const ad = player.getCurrentAd();\n      if (!ad) return;\n\n      const timeUntilSkip = ad.skipOffset - progress.currentTime;\n      \n      if (timeUntilSkip <= 0) {\n        setCanSkip(true);\n        setCountdown(0);\n      } else {\n        setCanSkip(false);\n        setCountdown(Math.ceil(timeUntilSkip));\n      }\n    };\n\n    player.addEventListener('adProgress', onAdProgress);\n    return () => player.removeEventListener('adProgress', onAdProgress);\n  }, []);\n\n  if (!canSkip && countdown === 0) return null;\n\n  return (\n    <TouchableOpacity\n      style={styles.skipButton}\n      onPress={() => player.skipAd()}\n      disabled={!canSkip}\n    >\n      <Text>\n        {canSkip ? 'Skip Ad \u203A' : `Skip in ${countdown}s`}\n      </Text>\n    </TouchableOpacity>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ad-countdown",children:"Ad Countdown"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function AdCountdown({ player }) {\n  const [remaining, setRemaining] = useState(0);\n\n  useEffect(() => {\n    const onAdProgress = (progress) => {\n      setRemaining(Math.ceil(progress.duration - progress.currentTime));\n    };\n\n    player.addEventListener('adProgress', onAdProgress);\n    return () => player.removeEventListener('adProgress', onAdProgress);\n  }, []);\n\n  return <Text style={styles.countdown}>Ad: {remaining}s</Text>;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import React, { useState } from 'react';\nimport { View, Text, ActivityIndicator } from 'react-native';\nimport { useVideoPlayer, VideoView } from 'react-native-video';\n\nfunction VideoWithAds({ videoUrl, adTagUrl }) {\n  const [isAdPlaying, setIsAdPlaying] = useState(false);\n  const [adTitle, setAdTitle] = useState('');\n\n  const player = useVideoPlayer({\n    source: { uri: videoUrl },\n    ads: {\n      enabled: true,\n      provider: 'ima',\n      adTagUrl,\n    },\n  });\n\n  // Ad events\n  player.addEventListener('adStart', (ad) => {\n    setIsAdPlaying(true);\n    setAdTitle(ad.title || 'Advertisement');\n  });\n\n  player.addEventListener('adComplete', () => {\n    setIsAdPlaying(false);\n    setAdTitle('');\n  });\n\n  player.addEventListener('adError', (error) => {\n    console.error('Ad error:', error);\n    setIsAdPlaying(false);\n  });\n\n  return (\n    <View style={styles.container}>\n      <VideoView player={player} style={styles.video} />\n      \n      {isAdPlaying && (\n        <View style={styles.adOverlay}>\n          <Text style={styles.adBadge}>Ad</Text>\n          <Text style={styles.adTitle}>{adTitle}</Text>\n          <CustomSkipButton player={player} />\n        </View>\n      )}\n    </View>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"request-settings",children:"Request Settings"}),"\n",(0,r.jsx)(n.p,{children:"Configure ad request:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'ima',\n  adTagUrl: '...',\n  requestSettings: {\n    omidVersion: '1.3.7',\n    playerType: 'react-native-video',\n    playerVersion: '6.0.0',\n    ppid: 'user123', // Publisher Provided ID\n  },\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ad-ui-settings",children:"Ad UI Settings"}),"\n",(0,r.jsx)(n.p,{children:"Customize ad UI:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"ads: {\n  enabled: true,\n  provider: 'ima',\n  adTagUrl: '...',\n  uiSettings: {\n    showCountdown: true,\n    showAdAttribution: true,\n  },\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.p,{children:"Use Google's test ads:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const TEST_AD_TAG = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&sz=640x480&cust_params=sample_ct%3Dlinear&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=';\n\nads: {\n  enabled: true,\n  provider: 'ima',\n  adTagUrl: TEST_AD_TAG,\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"platform-setup",children:"Platform Setup"}),"\n",(0,r.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,r.jsxs)(n.p,{children:["Add to ",(0,r.jsx)(n.code,{children:"Info.plist"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<key>NSAppTransportSecurity</key>\n<dict>\n  <key>NSAllowsArbitraryLoads</key>\n  <true/>\n</dict>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,r.jsx)(n.p,{children:"No additional setup required."}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error Handling"})," - Always handle ad errors gracefully"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loading States"})," - Show loading indicator during ad load"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Control"})," - Respect skip button and ad timing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analytics"})," - Track ad impressions and completions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testing"})," - Test with various ad formats"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fallback"})," - Continue content if ads fail"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"ads-not-playing",children:"Ads Not Playing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify ad tag URL is correct"}),"\n",(0,r.jsx)(n.li,{children:"Check network connectivity"}),"\n",(0,r.jsx)(n.li,{children:"Review ad error messages"}),"\n",(0,r.jsx)(n.li,{children:"Test with Google's sample ad tags"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ads-blocked",children:"Ads Blocked"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ad blockers may block IMA SDK"}),"\n",(0,r.jsx)(n.li,{children:"Use HTTPS for ad tags"}),"\n",(0,r.jsx)(n.li,{children:"Check app transport security settings"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-video/docs/v7/players/advertising/getting-started",children:"Getting Started"})," - Ads overview"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-video/docs/v7/players/advertising/google-dai",children:"Google DAI"})," - Server-side ads ",(0,r.jsx)(n.em,{children:"(Pro)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-video/docs/v7/players/events/useEvent",children:"Events"})," - Event handling"]}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},56151:function(e,n,s){s.d(n,{R:()=>t,x:()=>l});var i=s(96540);let r={},d=i.createContext(r);function t(e){let n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);