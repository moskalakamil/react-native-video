"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["2411"],{24116:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>t,toc:()=>c,default:()=>h,metadata:()=>i,assets:()=>d,contentTitle:()=>s});var i=JSON.parse('{"id":"players/usage/lifecycle","title":"Lifecycle","description":"Manage the player\'s lifecycle including initialization, preloading, and cleanup.","source":"@site/docs/players/usage/lifecycle.md","sourceDirName":"players/usage","slug":"/players/usage/lifecycle","permalink":"/react-native-video/docs/v7/players/usage/lifecycle","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Multiview","permalink":"/react-native-video/docs/v7/players/usage/multiview"},"next":{"title":"Low Latency","permalink":"/react-native-video/docs/v7/players/usage/low-latency"}}'),r=l(74848),a=l(56151);let t={},s="Lifecycle",d={},c=[{value:"Overview",id:"overview",level:2},{value:"initialize()",id:"initialize",level:2},{value:"preload()",id:"preload",level:2},{value:"release()",id:"release",level:2},{value:"When to Use",id:"when-to-use",level:3},{value:"With useVideoPlayer",id:"with-usevideoplayer",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"See Also",id:"see-also",level:2}];function o(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lifecycle",children:"Lifecycle"})}),"\n",(0,r.jsx)(n.p,{children:"Manage the player's lifecycle including initialization, preloading, and cleanup."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"State"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Created"})}),(0,r.jsx)(n.td,{children:"Player exists, may not be initialized"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Initialized"})}),(0,r.jsx)(n.td,{children:"Native player ready, source loading"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Ready"})}),(0,r.jsx)(n.td,{children:"Media loaded, ready to play"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Released"})}),(0,r.jsx)(n.td,{children:"Resources freed, instance unusable"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"initialize",children:"initialize()"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"initialize(): Promise<void>;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Manually initialize the native player. Only needed with deferred initialization."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const player = useVideoPlayer({\n  uri: source,\n  initializeOnCreation: false,\n});\n\n// Later, on user action\nawait player.initialize();\nplayer.play();\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"When to use:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Batch-creating players without immediate network cost"}),"\n",(0,r.jsx)(n.li,{children:"Attaching event handlers before network requests"}),"\n",(0,r.jsx)(n.li,{children:"Explicit control over when buffering begins"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"preload",children:"preload()"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"preload(): Promise<void>;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Start buffering without playing. Initializes if needed."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Preload next video for instant playback\nawait player.preload();\n\n// Later\nplayer.play(); // Instant start\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Preloading too many videos can cause memory issues. Limit to 2-3."})}),"\n",(0,r.jsx)(n.h2,{id:"release",children:"release()"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"release(): void;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Release all native resources. ",(0,r.jsx)(n.strong,{children:"Player becomes unusable after this."})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274C Wrong\nplayer.release();\nplayer.play(); // Throws error!\n\n// \u2705 Correct - clear source, keep player\nawait player.replaceSourceAsync(null);\nawait player.replaceSourceAsync({ uri: newSource }); // Works!\n"})}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use",children:"When to Use"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"Use"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Done with player permanently"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"release()"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Might play another video later"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"replaceSourceAsync(null)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Switching videos"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"replaceSourceAsync(newSource)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Using ",(0,r.jsx)(n.code,{children:"useVideoPlayer"})," hook"]}),(0,r.jsx)(n.td,{children:"Automatic cleanup"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:["After ",(0,r.jsx)(n.code,{children:"release()"}),", any access to the player throws an error."]})}),"\n",(0,r.jsx)(n.h2,{id:"with-usevideoplayer",children:"With useVideoPlayer"}),"\n",(0,r.jsx)(n.p,{children:"Hook manages lifecycle automatically:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function Player() {\n  // Created on mount, released on unmount\n  const player = useVideoPlayer(source);\n  \n  return <VideoView player={player} />;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import React, { useState, useEffect } from 'react';\nimport { View, Button, Text } from 'react-native';\nimport { VideoPlayer, VideoView } from 'react-native-video';\n\nfunction ManualLifecycle() {\n  const [player, setPlayer] = useState<VideoPlayer | null>(null);\n  const [status, setStatus] = useState('No player');\n\n  const create = () => {\n    const p = new VideoPlayer({\n      uri: source,\n      initializeOnCreation: false,\n    });\n    setPlayer(p);\n    setStatus('Created');\n  };\n\n  const init = async () => {\n    await player?.initialize();\n    setStatus('Initialized');\n  };\n\n  const preload = async () => {\n    await player?.preload();\n    setStatus('Preloaded');\n  };\n\n  const release = () => {\n    player?.release();\n    setPlayer(null);\n    setStatus('Released');\n  };\n\n  useEffect(() => {\n    return () => player?.release();\n  }, [player]);\n\n  return (\n    <View>\n      {player && <VideoView player={player} style={{ width: '100%', height: 300 }} />}\n      <Text>Status: {status}</Text>\n      <Button title=\"Create\" onPress={create} disabled={!!player} />\n      <Button title=\"Initialize\" onPress={init} disabled={!player} />\n      <Button title=\"Preload\" onPress={preload} disabled={!player} />\n      <Button title=\"Play\" onPress={() => player?.play()} disabled={!player} />\n      <Button title=\"Release\" onPress={release} disabled={!player} />\n    </View>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-video/docs/v7/players/use-video-player",children:"useVideoPlayer"})," - Hook documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-video/docs/v7/players/player",children:"Player"})," - Detailed lifecycle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-video/docs/v7/players/usage/source",children:"Source"})," - Source management"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},56151:function(e,n,l){l.d(n,{R:()=>t,x:()=>s});var i=l(96540);let r={},a=i.createContext(r);function t(e){let n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);