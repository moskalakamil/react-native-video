"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["6741"],{11121:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>o,toc:()=>d,default:()=>u,metadata:()=>i,assets:()=>r,contentTitle:()=>s});var i=JSON.parse('{"id":"extensions/uploading/network-tracking","title":"Network Tracking","description":"Automatically manage uploads based on network connectivity and type.","source":"@site/docs/extensions/uploading/network-tracking.md","sourceDirName":"extensions/uploading","slug":"/extensions/uploading/network-tracking","permalink":"/react-native-video/docs/v7/extensions/uploading/network-tracking","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Queue Management","permalink":"/react-native-video/docs/v7/extensions/uploading/queue-management"},"next":{"title":"Configuration","permalink":"/react-native-video/docs/v7/extensions/uploading/configuration"}}'),a=t(74848),l=t(56151);let o={},s="Network Tracking",r={},d=[{value:"Overview",id:"overview",level:2},{value:"Basic Network Tracking",id:"basic-network-tracking",level:2},{value:"WiFi Only",id:"wifi-only",level:2},{value:"Cellular Data Limit",id:"cellular-data-limit",level:2},{value:"Network Events",id:"network-events",level:2},{value:"Network State Object",id:"network-state-object",level:3},{value:"Automatic Pause/Resume",id:"automatic-pauseresume",level:2},{value:"Connection Type Detection",id:"connection-type-detection",level:2},{value:"Network Quality Adaptation",id:"network-quality-adaptation",level:2},{value:"Bandwidth Monitoring",id:"bandwidth-monitoring",level:2},{value:"Network Permissions",id:"network-permissions",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Network Strategies",id:"network-strategies",level:2},{value:"Conservative (WiFi Only)",id:"conservative-wifi-only",level:3},{value:"Balanced (Cellular with Limit)",id:"balanced-cellular-with-limit",level:3},{value:"Aggressive (Any Connection)",id:"aggressive-any-connection",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"network-tracking",children:"Network Tracking"})}),"\n",(0,a.jsx)(n.p,{children:"Automatically manage uploads based on network connectivity and type."}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"Network tracking provides:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Auto Pause/Resume"})," - Pause when offline, resume when back online"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Connection Type"})," - Detect WiFi, cellular, ethernet"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Cellular Control"})," - Restrict uploads to WiFi only"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Network Quality"})," - Adapt to connection speed"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Bandwidth Monitoring"})," - Track network usage"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"basic-network-tracking",children:"Basic Network Tracking"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"import { VideoUploader } from 'react-native-video';\n\nconst upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  networkTracking: true, // Enable network tracking\n});\n\nupload.onNetworkChange((state) => {\n  console.log('Network:', state.isConnected ? 'Online' : 'Offline');\n  console.log('Type:', state.type); // 'wifi', 'cellular', 'ethernet'\n});\n\nawait upload.start();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"wifi-only",children:"WiFi Only"}),"\n",(0,a.jsx)(n.p,{children:"Restrict uploads to WiFi:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  requireWifi: true, // Only upload on WiFi\n});\n\nupload.onNetworkChange((state) => {\n  if (state.type === 'cellular') {\n    console.log('Waiting for WiFi...');\n  }\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"cellular-data-limit",children:"Cellular Data Limit"}),"\n",(0,a.jsx)(n.p,{children:"Limit cellular data usage:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  allowCellular: true,\n  cellularDataLimit: 50 * 1024 * 1024, // 50 MB max on cellular\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"network-events",children:"Network Events"}),"\n",(0,a.jsx)(n.p,{children:"Listen to network state changes:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"upload.onNetworkChange((state) => {\n  console.log('Connected:', state.isConnected);\n  console.log('Type:', state.type); // 'wifi', 'cellular', 'ethernet', 'none'\n  console.log('Quality:', state.quality); // 'excellent', 'good', 'fair', 'poor'\n  console.log('Speed:', state.estimatedSpeed); // bytes per second\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"network-state-object",children:"Network State Object"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"interface NetworkState {\n  isConnected: boolean;\n  type: 'wifi' | 'cellular' | 'ethernet' | 'none';\n  quality: 'excellent' | 'good' | 'fair' | 'poor';\n  estimatedSpeed: number; // bytes per second\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"automatic-pauseresume",children:"Automatic Pause/Resume"}),"\n",(0,a.jsx)(n.p,{children:"Uploads automatically pause when offline:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  networkTracking: true,\n  autoPauseOnDisconnect: true, // Auto-pause when offline\n  autoResumeOnConnect: true, // Auto-resume when back online\n});\n\nupload.onStateChange((state) => {\n  console.log('State:', state);\n  // 'uploading' \u2192 'paused' (when offline) \u2192 'uploading' (when back online)\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"connection-type-detection",children:"Connection Type Detection"}),"\n",(0,a.jsx)(n.p,{children:"Check current connection:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"import { VideoUploadManager } from 'react-native-video';\n\nconst networkState = await VideoUploadManager.getNetworkState();\n\nif (networkState.type === 'wifi') {\n  console.log('Connected to WiFi');\n} else if (networkState.type === 'cellular') {\n  console.log('Connected to cellular');\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"network-quality-adaptation",children:"Network Quality Adaptation"}),"\n",(0,a.jsx)(n.p,{children:"Adapt upload based on network quality:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  multipart: true,\n  adaptToNetworkQuality: true,\n});\n\nupload.onNetworkChange((state) => {\n  if (state.quality === 'poor') {\n    console.log('Reducing chunk size for poor connection');\n    // SDK automatically adjusts chunk size\n  }\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"bandwidth-monitoring",children:"Bandwidth Monitoring"}),"\n",(0,a.jsx)(n.p,{children:"Track bandwidth usage:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"upload.onBandwidthUpdate((bandwidth) => {\n  console.log(`Upload speed: ${(bandwidth.speed / 1024 / 1024).toFixed(2)} MB/s`);\n  console.log(`Total uploaded: ${(bandwidth.totalBytes / 1024 / 1024).toFixed(2)} MB`);\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"network-permissions",children:"Network Permissions"}),"\n",(0,a.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,a.jsx)(n.p,{children:"No additional permissions required."}),"\n",(0,a.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,a.jsxs)(n.p,{children:["Add to ",(0,a.jsx)(n.code,{children:"AndroidManifest.xml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />\n<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />\n'})}),"\n",(0,a.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"import React, { useState, useEffect } from 'react';\nimport { View, Text, Switch, Button } from 'react-native';\nimport { VideoUploader, VideoUploadManager } from 'react-native-video';\n\nfunction NetworkAwareUpload({ filePath }) {\n  const [upload, setUpload] = useState(null);\n  const [networkState, setNetworkState] = useState(null);\n  const [wifiOnly, setWifiOnly] = useState(false);\n\n  useEffect(() => {\n    const checkNetwork = async () => {\n      const state = await VideoUploadManager.getNetworkState();\n      setNetworkState(state);\n    };\n\n    checkNetwork();\n    const interval = setInterval(checkNetwork, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const startUpload = async () => {\n    const ul = await VideoUploader.upload({\n      file: filePath,\n      url: 'https://api.example.com/upload',\n      networkTracking: true,\n      requireWifi: wifiOnly,\n      autoPauseOnDisconnect: true,\n      autoResumeOnConnect: true,\n    });\n\n    ul.onNetworkChange((state) => {\n      setNetworkState(state);\n      \n      if (!state.isConnected) {\n        console.log('Network disconnected - upload paused');\n      } else if (state.type === 'cellular' && wifiOnly) {\n        console.log('Waiting for WiFi connection...');\n      } else {\n        console.log('Network available - upload active');\n      }\n    });\n\n    ul.onBandwidthUpdate((bandwidth) => {\n      console.log(`Speed: ${(bandwidth.speed / 1024 / 1024).toFixed(2)} MB/s`);\n    });\n\n    setUpload(ul);\n    await ul.start();\n  };\n\n  return (\n    <View>\n      <View style={styles.networkStatus}>\n        <Text style={styles.title}>Network Status</Text>\n        {networkState && (\n          <>\n            <Text>\n              Status: {networkState.isConnected ? '\u2705 Connected' : '\u274C Disconnected'}\n            </Text>\n            <Text>Type: {networkState.type}</Text>\n            <Text>Quality: {networkState.quality}</Text>\n            {networkState.estimatedSpeed && (\n              <Text>\n                Speed: {(networkState.estimatedSpeed / 1024 / 1024).toFixed(2)} MB/s\n              </Text>\n            )}\n          </>\n        )}\n      </View>\n\n      <View style={styles.settings}>\n        <Text>WiFi Only:</Text>\n        <Switch\n          value={wifiOnly}\n          onValueChange={setWifiOnly}\n          disabled={upload?.state === 'uploading'}\n        />\n      </View>\n\n      {networkState?.type === 'cellular' && wifiOnly && (\n        <Text style={styles.warning}>\n          \u26A0\uFE0F Upload will wait for WiFi connection\n        </Text>\n      )}\n\n      <Button\n        title=\"Start Upload\"\n        onPress={startUpload}\n        disabled={upload?.state === 'uploading'}\n      />\n    </View>\n  );\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"network-strategies",children:"Network Strategies"}),"\n",(0,a.jsx)(n.h3,{id:"conservative-wifi-only",children:"Conservative (WiFi Only)"}),"\n",(0,a.jsx)(n.p,{children:"Best for large files or limited data plans:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/large-video.mp4',\n  url: 'https://api.example.com/upload',\n  requireWifi: true,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"balanced-cellular-with-limit",children:"Balanced (Cellular with Limit)"}),"\n",(0,a.jsx)(n.p,{children:"Allow cellular with data limit:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  allowCellular: true,\n  cellularDataLimit: 100 * 1024 * 1024, // 100 MB\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"aggressive-any-connection",children:"Aggressive (Any Connection)"}),"\n",(0,a.jsx)(n.p,{children:"Upload immediately on any connection:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const upload = await VideoUploader.upload({\n  file: '/path/to/video.mp4',\n  url: 'https://api.example.com/upload',\n  allowCellular: true,\n  networkTracking: true,\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"WiFi for Large Files"})," - Require WiFi for files > 100 MB"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Auto Pause/Resume"})," - Always enable for better UX"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User Preference"})," - Let users choose WiFi-only mode"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Data Limits"})," - Set reasonable cellular data limits"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Network Feedback"})," - Show network status to users"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Quality Adaptation"})," - Enable for better reliability"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/uploading/basic-upload",children:"Basic Upload"})," - Simple file uploads"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/uploading/queue-management",children:"Queue Management"})," - Handle multiple uploads"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/uploading/configuration",children:"Configuration"})," - Upload configuration"]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},56151:function(e,n,t){t.d(n,{R:()=>o,x:()=>s});var i=t(96540);let a={},l=i.createContext(a);function o(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);