"use strict";(self.webpackChunk_react_native_video_docs=self.webpackChunk_react_native_video_docs||[]).push([["4362"],{49598:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>a,toc:()=>l,default:()=>h,metadata:()=>c,assets:()=>d,contentTitle:()=>s});var c=JSON.parse('{"id":"extensions/caching/getting-started","title":"Getting Started","description":"Pre-cache video content for instant playback and reduced bandwidth usage.","source":"@site/docs/extensions/caching/getting-started.md","sourceDirName":"extensions/caching","slug":"/extensions/caching/getting-started","permalink":"/react-native-video/docs/v7/extensions/caching/getting-started","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Configuration","permalink":"/react-native-video/docs/v7/extensions/uploading/configuration"},"next":{"title":"Configuration","permalink":"/react-native-video/docs/v7/extensions/caching/configuration"}}'),t=i(74848),r=i(56151);let a={},s="Getting Started",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Automatic Caching",id:"automatic-caching",level:3},{value:"Manual Caching",id:"manual-caching",level:3},{value:"useCache Hook",id:"usecache-hook",level:2},{value:"Properties",id:"properties",level:3},{value:"Methods",id:"methods",level:3},{value:"Example",id:"example",level:3},{value:"Cache Options",id:"cache-options",level:2},{value:"Cache by Percentage",id:"cache-by-percentage",level:3},{value:"Cache by Duration",id:"cache-by-duration",level:3},{value:"Priority Caching",id:"priority-caching",level:3},{value:"Network Policy",id:"network-policy",level:3},{value:"Feed Caching",id:"feed-caching",level:2},{value:"Global Configuration",id:"global-configuration",level:2},{value:"Cache Status",id:"cache-status",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Platform Configuration",id:"platform-configuration",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Platform Support",id:"platform-support",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,t.jsx)(n.p,{children:"Pre-cache video content for instant playback and reduced bandwidth usage."}),"\n",(0,t.jsx)(n.admonition,{title:"Pro Feature - Coming Soon",type:"tip",children:(0,t.jsx)(n.p,{children:"Video caching is a Pro feature currently in development."})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Video caching provides:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Instant Playback"})}),(0,t.jsx)(n.td,{children:"Zero startup delay from cached content"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Seamless Streaming"})}),(0,t.jsx)(n.td,{children:"Play while caching in background"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Partial Caching"})}),(0,t.jsx)(n.td,{children:"Cache only first X% or X seconds"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Offline Playback"})}),(0,t.jsx)(n.td,{children:"Watch without network connection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Smart Cleanup"})}),(0,t.jsx)(n.td,{children:"Automatic LRU-based cache management"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Bandwidth Savings"})}),(0,t.jsx)(n.td,{children:"Reduce data usage on repeat views"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(n.h3,{id:"automatic-caching",children:"Automatic Caching"}),"\n",(0,t.jsx)(n.p,{children:"The simplest approach - cache is used automatically:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useVideoPlayer, VideoView } from 'react-native-video';\n\nfunction Player({ source }) {\n  const player = useVideoPlayer({\n    uri: source,\n    cache: true, // Enable caching\n  });\n\n  return <VideoView player={player} />;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"That's it! The SDK automatically:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Caches video segments as they stream"}),"\n",(0,t.jsx)(n.li,{children:"Uses cached data on repeat playback"}),"\n",(0,t.jsx)(n.li,{children:"Manages storage limits"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"manual-caching",children:"Manual Caching"}),"\n",(0,t.jsx)(n.p,{children:"For more control, cache videos before playback:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useCache } from 'react-native-video';\n\nfunction VideoItem({ video }) {\n  const cache = useCache(video.url);\n\n  useEffect(() => {\n    // Cache first 30 seconds to disk\n    cache.save({ duration: 30 });\n  }, []);\n\n  return (\n    <View>\n      <Text>Cached: {cache.progress}%</Text>\n      <VideoView player={player} />\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"usecache-hook",children:"useCache Hook"}),"\n",(0,t.jsx)(n.p,{children:"React hook for caching control:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const cache = useCache(url: string);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"properties",children:"Properties"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"isCached"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:"Whether video has cached content"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"progress"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"number"})}),(0,t.jsx)(n.td,{children:"Cache progress (0-100)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"size"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"number"})}),(0,t.jsx)(n.td,{children:"Cached size in bytes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CacheStatus"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"'idle'"})," | ",(0,t.jsx)(n.code,{children:"'caching'"})," | ",(0,t.jsx)(n.code,{children:"'cached'"})," | ",(0,t.jsx)(n.code,{children:"'error'"})]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"save(options)"})}),(0,t.jsx)(n.td,{children:"Save video to cache (persistent)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cancel()"})}),(0,t.jsx)(n.td,{children:"Cancel ongoing caching"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"clear()"})}),(0,t.jsx)(n.td,{children:"Remove from cache"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"function SmartVideoPlayer({ source }) {\n  const cache = useCache(source);\n  const player = useVideoPlayer({ uri: source, cache: true });\n\n  // Cache on mount - persists across app restarts\n  useEffect(() => {\n    if (!cache.isCached) {\n      cache.save({ percentage: 50 });\n    }\n  }, []);\n\n  return (\n    <View>\n      <VideoView player={player} />\n      \n      {cache.status === 'caching' && (\n        <ProgressBar progress={cache.progress / 100} />\n      )}\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"cache-options",children:"Cache Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface CacheOptions {\n  percentage?: number;  // Cache first X% (default: 100)\n  duration?: number;    // Cache first X seconds\n  priority?: 'high' | 'medium' | 'low';\n  networkPolicy?: 'any' | 'wifi' | 'unmetered';\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cache-by-percentage",children:"Cache by Percentage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Cache first 50% - persists on disk\ncache.save({ percentage: 50 });\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cache-by-duration",children:"Cache by Duration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Cache first 30 seconds\ncache.save({ duration: 30 });\n"})}),"\n",(0,t.jsx)(n.h3,{id:"priority-caching",children:"Priority Caching"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// High priority - cache immediately\ncache.save({ priority: 'high' });\n\n// Low priority - cache when idle\ncache.save({ priority: 'low' });\n"})}),"\n",(0,t.jsx)(n.h3,{id:"network-policy",children:"Network Policy"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Only cache on WiFi\ncache.save({ networkPolicy: 'wifi' });\n\n// Only on unmetered connections\ncache.save({ networkPolicy: 'unmetered' });\n"})}),"\n",(0,t.jsx)(n.h2,{id:"feed-caching",children:"Feed Caching"}),"\n",(0,t.jsx)(n.p,{children:"Cache videos as user scrolls - they persist across app restarts:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { FlatList } from 'react-native';\nimport { useCache, useVideoPlayer, VideoView, VideoCache } from 'react-native-video';\n\nfunction VideoFeed({ videos }) {\n  return (\n    <FlatList\n      data={videos}\n      renderItem={({ item, index }) => (\n        <VideoItem video={item} index={index} />\n      )}\n      onViewableItemsChanged={({ viewableItems }) => {\n        // Cache next 2 videos to disk\n        viewableItems.forEach(({ index }) => {\n          const nextVideos = videos.slice(index + 1, index + 3);\n          nextVideos.forEach(v => VideoCache.save(v.url, { percentage: 30 }));\n        });\n      }}\n    />\n  );\n}\n\nfunction VideoItem({ video }) {\n  const cache = useCache(video.url);\n  const player = useVideoPlayer({ uri: video.url, cache: true });\n\n  return (\n    <View>\n      <VideoView player={player} style={{ height: 300 }} />\n      {cache.isCached && <CachedBadge />}\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"global-configuration",children:"Global Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Configure caching behavior globally:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { VideoCache } from 'react-native-video';\n\n// At app startup\nVideoCache.configure({\n  // Storage\n  maxSize: 500 * 1024 * 1024, // 500 MB\n  \n  // Behavior\n  defaultPercentage: 50,\n  networkPolicy: 'wifi',\n  \n  // Cleanup\n  maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n  cleanupStrategy: 'lru',\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"cache-status",children:"Cache Status"}),"\n",(0,t.jsx)(n.p,{children:"Check cache status for any URL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const status = await VideoCache.getStatus(url);\n\nconsole.log(status);\n// {\n//   isCached: true,\n//   percentage: 50,\n//   size: 25_000_000, // 25 MB\n//   createdAt: Date,\n//   lastAccessed: Date,\n// }\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import React, { useEffect, useState } from 'react';\nimport { View, Text, FlatList, TouchableOpacity } from 'react-native';\nimport { \n  useVideoPlayer, \n  VideoView, \n  useCache,\n  VideoCache \n} from 'react-native-video';\n\n// Configure at app startup\nVideoCache.configure({\n  maxSize: 500 * 1024 * 1024,\n  networkPolicy: 'wifi',\n});\n\nfunction App() {\n  const [videos] = useState([\n    { id: '1', url: 'https://example.com/video1.mp4', title: 'Video 1' },\n    { id: '2', url: 'https://example.com/video2.mp4', title: 'Video 2' },\n    { id: '3', url: 'https://example.com/video3.mp4', title: 'Video 3' },\n  ]);\n\n  return (\n    <FlatList\n      data={videos}\n      renderItem={({ item }) => <CachedVideoPlayer video={item} />}\n      keyExtractor={(item) => item.id}\n    />\n  );\n}\n\nfunction CachedVideoPlayer({ video }) {\n  const cache = useCache(video.url);\n  \n  const player = useVideoPlayer({\n    uri: video.url,\n    cache: true,\n  }, (_player) => {\n    _player.play();\n  });\n\n  // Cache first 30 seconds - persists on disk\n  useEffect(() => {\n    if (!cache.isCached) {\n      cache.save({ duration: 30 });\n    }\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <VideoView player={player} style={styles.video} />\n      \n      <View style={styles.info}>\n        <Text style={styles.title}>{video.title}</Text>\n        \n        {cache.status === 'caching' && (\n          <Text>Caching: {cache.progress}%</Text>\n        )}\n        \n        {cache.isCached && (\n          <View style={styles.cachedBadge}>\n            <Text>\u2713 Cached</Text>\n          </View>\n        )}\n      </View>\n      \n      <TouchableOpacity onPress={() => cache.clear()}>\n        <Text>Clear Cache</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"platform-configuration",children:"Platform Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,t.jsx)(n.p,{children:"Add background fetch capability for background caching:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"\x3c!-- Info.plist --\x3e\n<key>UIBackgroundModes</key>\n<array>\n  <string>fetch</string>\n</array>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,t.jsx)(n.p,{children:"Required permissions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- AndroidManifest.xml --\x3e\n<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />\n'})}),"\n",(0,t.jsx)(n.h2,{id:"platform-support",children:"Platform Support"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"iOS"}),(0,t.jsx)(n.th,{children:"Android"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Automatic caching"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Partial caching"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Background caching"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Offline playback"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"HLS caching"}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DASH caching"}),(0,t.jsx)(n.td,{children:"\u274C"}),(0,t.jsx)(n.td,{children:"\u2705"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/caching/configuration",children:"Configuration"})," - Advanced cache settings"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/caching/strategies",children:"Strategies"})," - Smart caching strategies"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/caching/management",children:"Management"})," - Cache cleanup and monitoring"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/react-native-video/docs/v7/extensions/caching/storage",children:"Storage"})," - Storage optimization"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},56151:function(e,n,i){i.d(n,{R:()=>a,x:()=>s});var c=i(96540);let t={},r=c.createContext(t);function a(e){let n=c.useContext(r);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);